<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>使用 Go 串接 Google reCAPTCHA Enterprise - Yuan のノート</title><meta name=description content="心之所至，隨意亂書"><meta name=keywords content="golang,embedded,linux,backend,programming"><meta name=author content="Yuan"><meta property="og:title" content="使用 Go 串接 Google reCAPTCHA Enterprise - Yuan のノート"><meta property="og:description" content="心之所至，隨意亂書"><meta property="og:type" content="article"><meta property="og:url" content="https://e61983.github.io/posts/use-google-recaptcha/"><link rel=icon type=image/svg+xml href=/favicon.svg><link rel=icon type=image/x-icon href=/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/favicon.svg><meta name=theme-color content="#0d1117"><link rel=stylesheet href=https://e61983.github.io/yuan/css/main.min.css><link rel=stylesheet href=https://e61983.github.io/yuan/css/chroma.min.css><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=Inter:wght@300;400;500;600;700&display=swap" rel=stylesheet></head><body class=theme-dark><div class=layout><header class=header><div class=container><div class=header-content><div class=header-brand><a href=https://e61983.github.io/ class=brand-link><span class=brand-text>Yuan のノート</span></a><p class=brand-subtitle>心之所至，隨意亂書</p></div><nav class=nav><ul class=nav-list><li class=nav-item><a href=/ class=nav-link>首頁</a></li><li class=nav-item><a href=/posts/ class=nav-link>文章</a></li><li class=nav-item><a href=/categories/ class=nav-link>分類</a></li><li class=nav-item><a href=/tags/ class=nav-link>標籤</a></li><li class=nav-item><a href=/archive/ class=nav-link>歸檔</a></li></ul></nav><button class=mobile-menu-toggle aria-label="Toggle menu">
<span class=hamburger></span>
<span class=hamburger></span>
<span class=hamburger></span></button></div></div></header><main class=main><div class=container><div class=post-layout><article class=post><header class=post-header><h1 class=post-title>使用 Go 串接 Google reCAPTCHA Enterprise</h1><div class=post-meta><time class=post-date datetime=2025-08-20T23:22:42+08:00>2025年08月20日
</time><span class=reading-time>2 分鐘閱讀</span>
<span class=word-count>410 字</span>
<span class=post-author>by Yuan</span></div><div class=post-tags><a href=/tags/go class=tag>go</a>
<a href=/tags/google class=tag>google</a>
<a href=/tags/recaptcha class=tag>recaptcha</a>
<a href=/tags/security class=tag>security</a>
<a href=/tags/website class=tag>website</a>
<a href=/tags/backend class=tag>backend</a></div><div class=post-categories><a href=/categories/website class=category>website</a></div></header><div class=mobile-toc-toggle><button class=toc-toggle-btn aria-label=顯示/隱藏目錄>
<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M3 9h14V7H3v2zm0 4h14v-2H3v2zm0 4h14v-2H3v2zm16 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z"/></svg>
目錄</button><nav class=mobile-toc><h3 class=toc-title>目錄</h3><nav id=TableOfContents><ul><li><a href=#前言>前言</a></li><li><a href=#主要內容>主要內容</a><ul><li><a href=#前置準備>前置準備</a></li><li><a href=#前端取得-token>前端：取得 Token</a></li><li><a href=#後端驗證-token-go-範例>後端：驗證 Token (Go 範例)</a></li><li><a href=#驗證邏輯>驗證邏輯</a></li></ul></li><li><a href=#小結>小結</a></li><li><a href=#參考連結>參考連結</a></li></ul></nav></nav></div><div class=post-content><h2 id=前言>前言</h2><p>在網站應用中，表單或登入功能常常成為機器人攻擊的目標。
Google reCAPTCHA Enterprise 提供了更安全且彈性的防護方式，能透過 <strong>風險評分 (Score)</strong> 來判斷使用者行為是否可信。</p><p>本篇會示範如何從零開始設定並串接 reCAPTCHA Enterprise，包含 <strong>GCP 設定、前端整合、後端驗證</strong>。</p><h2 id=主要內容>主要內容</h2><h3 id=前置準備>前置準備</h3><h4 id=建立-recaptcha-key>建立 reCAPTCHA Key</h4><ol><li><p>進入 <a href=https://console.cloud.google.com/>Google Cloud Console</a></p></li><li><p>啟用 <strong>reCAPTCHA Enterprise API</strong></p></li><li><p>建立 <strong>Site Key</strong>，需要設定：</p><ul><li>網域（允許的前端來源）</li><li>驗證模式（建議使用 <strong>Score-based</strong>）</li></ul></li><li><p>記下以下資訊：</p><ul><li><strong>Site Key</strong>（前端需要）</li><li><strong>Project ID</strong>（後端呼叫 API 使用）</li></ul></li><li><p>建立 Service Account</p><ul><li>前往 IAM & Admin → Service Accounts</li><li>建立新帳號，角色選擇 reCAPTCHA Enterprise Admin 或 Editor</li><li>建立完成後，下載 JSON 憑證檔，命名為 service-account.json</li></ul></li></ol><h3 id=前端取得-token>前端：取得 Token</h3><p>在網頁上載入 <code>enterprise.js</code>，呼叫 <code>execute()</code> 取得 token。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=ln> 1</span><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://www.google.com/recaptcha/enterprise.js?render=your_site_key&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>  <span class=kd>function</span> <span class=nx>onSubmit</span><span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>    <span class=nx>e</span><span class=p>.</span><span class=nx>preventDefault</span><span class=p>();</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>
</span></span><span class=line><span class=ln> 6</span><span class=cl>    <span class=nx>grecaptcha</span><span class=p>.</span><span class=nx>enterprise</span><span class=p>.</span><span class=nx>ready</span><span class=p>(</span><span class=kr>async</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>      <span class=kr>const</span> <span class=nx>token</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>grecaptcha</span><span class=p>.</span><span class=nx>enterprise</span><span class=p>.</span><span class=nx>execute</span><span class=p>(</span><span class=s1>&#39;your_site_key&#39;</span><span class=p>,</span> <span class=p>{</span> <span class=nx>action</span><span class=o>:</span> <span class=s1>&#39;login&#39;</span> <span class=p>});</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>
</span></span><span class=line><span class=ln> 9</span><span class=cl>      <span class=c1>// 傳送 token 到後端
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=c1></span>      <span class=kr>const</span> <span class=nx>resp</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>fetch</span><span class=p>(</span><span class=s1>&#39;/verify-recaptcha&#39;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>        <span class=nx>method</span><span class=o>:</span> <span class=s1>&#39;POST&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>        <span class=nx>headers</span><span class=o>:</span> <span class=p>{</span> <span class=s1>&#39;Content-Type&#39;</span><span class=o>:</span> <span class=s1>&#39;application/json&#39;</span> <span class=p>},</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>        <span class=nx>body</span><span class=o>:</span> <span class=nx>JSON</span><span class=p>.</span><span class=nx>stringify</span><span class=p>({</span> <span class=nx>token</span> <span class=p>})</span>
</span></span><span class=line><span class=ln>14</span><span class=cl>      <span class=p>});</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>
</span></span><span class=line><span class=ln>16</span><span class=cl>      <span class=kr>const</span> <span class=nx>result</span> <span class=o>=</span> <span class=kr>await</span> <span class=nx>resp</span><span class=p>.</span><span class=nx>json</span><span class=p>();</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=nx>result</span><span class=p>.</span><span class=nx>success</span> <span class=o>&amp;&amp;</span> <span class=nx>result</span><span class=p>.</span><span class=nx>score</span> <span class=o>&gt;=</span> <span class=mf>0.5</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>        <span class=nx>alert</span><span class=p>(</span><span class=s2>&#34;驗證通過，可以登入&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>      <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>        <span class=nx>alert</span><span class=p>(</span><span class=s2>&#34;驗證失敗，請再試一次&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=ln>21</span><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=ln>22</span><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=ln>23</span><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=ln>24</span><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=ln>25</span><span class=cl>
</span></span><span class=line><span class=ln>26</span><span class=cl><span class=p>&lt;</span><span class=nt>form</span> <span class=na>onsubmit</span><span class=o>=</span><span class=s>&#34;onSubmit(event)&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=ln>27</span><span class=cl>  <span class=p>&lt;</span><span class=nt>input</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;text&#34;</span> <span class=na>name</span><span class=o>=</span><span class=s>&#34;username&#34;</span> <span class=na>placeholder</span><span class=o>=</span><span class=s>&#34;帳號&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=ln>28</span><span class=cl>  <span class=p>&lt;</span><span class=nt>input</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;password&#34;</span> <span class=na>name</span><span class=o>=</span><span class=s>&#34;password&#34;</span> <span class=na>placeholder</span><span class=o>=</span><span class=s>&#34;密碼&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=ln>29</span><span class=cl>  <span class=p>&lt;</span><span class=nt>button</span> <span class=na>type</span><span class=o>=</span><span class=s>&#34;submit&#34;</span><span class=p>&gt;</span>登入<span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=ln>30</span><span class=cl><span class=p>&lt;/</span><span class=nt>form</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>這裡 <code>action: 'login'</code> 是自訂的標籤，方便後端追蹤不同的驗證情境。</p><h3 id=後端驗證-token-go-範例>後端：驗證 Token (Go 範例)</h3><p>使用官方 Go SDK <code>cloud.google.com/go/recaptchaenterprise/v2</code>，建立 <strong>Assessment</strong> 驗證 token。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=ln> 1</span><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>
</span></span><span class=line><span class=ln> 3</span><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>    <span class=s>&#34;context&#34;</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>    <span class=s>&#34;encoding/json&#34;</span>
</span></span><span class=line><span class=ln> 6</span><span class=cl>    <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>    <span class=s>&#34;log&#34;</span>
</span></span><span class=line><span class=ln> 8</span><span class=cl>    <span class=s>&#34;net/http&#34;</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>    <span class=s>&#34;os&#34;</span>
</span></span><span class=line><span class=ln>10</span><span class=cl>
</span></span><span class=line><span class=ln>11</span><span class=cl>    <span class=nx>recaptcha</span> <span class=s>&#34;cloud.google.com/go/recaptchaenterprise/v2/apiv1&#34;</span>
</span></span><span class=line><span class=ln>12</span><span class=cl>    <span class=nx>recaptchapb</span> <span class=s>&#34;cloud.google.com/go/recaptchaenterprise/v2/apiv1/recaptchaenterprisepb&#34;</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>    <span class=s>&#34;google.golang.org/api/option&#34;</span>
</span></span><span class=line><span class=ln>14</span><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=ln>15</span><span class=cl>
</span></span><span class=line><span class=ln>16</span><span class=cl><span class=kd>type</span> <span class=nx>VerifyRequest</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>17</span><span class=cl>    <span class=nx>Token</span> <span class=kt>string</span> <span class=s>`json:&#34;token&#34;`</span>
</span></span><span class=line><span class=ln>18</span><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=ln>19</span><span class=cl><span class=kd>type</span> <span class=nx>VerifyResponse</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>    <span class=nx>Success</span> <span class=kt>bool</span>    <span class=s>`json:&#34;success&#34;`</span>
</span></span><span class=line><span class=ln>21</span><span class=cl>    <span class=nx>Score</span>   <span class=kt>float32</span> <span class=s>`json:&#34;score&#34;`</span>
</span></span><span class=line><span class=ln>22</span><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=ln>23</span><span class=cl>
</span></span><span class=line><span class=ln>24</span><span class=cl><span class=kd>func</span> <span class=nf>verifyRecaptchaHandler</span><span class=p>(</span><span class=nx>w</span> <span class=nx>http</span><span class=p>.</span><span class=nx>ResponseWriter</span><span class=p>,</span> <span class=nx>r</span> <span class=o>*</span><span class=nx>http</span><span class=p>.</span><span class=nx>Request</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>25</span><span class=cl>    <span class=kd>var</span> <span class=nx>req</span> <span class=nx>VerifyRequest</span>
</span></span><span class=line><span class=ln>26</span><span class=cl>    <span class=nx>_</span> <span class=p>=</span> <span class=nx>json</span><span class=p>.</span><span class=nf>NewDecoder</span><span class=p>(</span><span class=nx>r</span><span class=p>.</span><span class=nx>Body</span><span class=p>).</span><span class=nf>Decode</span><span class=p>(</span><span class=o>&amp;</span><span class=nx>req</span><span class=p>)</span>
</span></span><span class=line><span class=ln>27</span><span class=cl>
</span></span><span class=line><span class=ln>28</span><span class=cl>    <span class=nx>ctx</span> <span class=o>:=</span> <span class=nx>context</span><span class=p>.</span><span class=nf>Background</span><span class=p>()</span>
</span></span><span class=line><span class=ln>29</span><span class=cl>    <span class=nx>client</span><span class=p>,</span> <span class=nx>_</span> <span class=o>:=</span> <span class=nx>recaptcha</span><span class=p>.</span><span class=nf>NewClient</span><span class=p>(</span><span class=nx>ctx</span><span class=p>,</span> <span class=nx>option</span><span class=p>.</span><span class=nf>WithCredentialsFile</span><span class=p>(</span><span class=s>&#34;service-account.json&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=ln>30</span><span class=cl>    <span class=k>defer</span> <span class=nx>client</span><span class=p>.</span><span class=nf>Close</span><span class=p>()</span>
</span></span><span class=line><span class=ln>31</span><span class=cl>
</span></span><span class=line><span class=ln>32</span><span class=cl>    <span class=nx>projectID</span> <span class=o>:=</span> <span class=nx>os</span><span class=p>.</span><span class=nf>Getenv</span><span class=p>(</span><span class=s>&#34;GOOGLE_CLOUD_PROJECT&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=ln>33</span><span class=cl>
</span></span><span class=line><span class=ln>34</span><span class=cl>    <span class=nx>assessment</span><span class=p>,</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nx>client</span><span class=p>.</span><span class=nf>CreateAssessment</span><span class=p>(</span><span class=nx>ctx</span><span class=p>,</span> <span class=o>&amp;</span><span class=nx>recaptchapb</span><span class=p>.</span><span class=nx>CreateAssessmentRequest</span><span class=p>{</span>
</span></span><span class=line><span class=ln>35</span><span class=cl>        <span class=nx>Parent</span><span class=p>:</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>&#34;projects/%s&#34;</span><span class=p>,</span> <span class=nx>projectID</span><span class=p>),</span>
</span></span><span class=line><span class=ln>36</span><span class=cl>        <span class=nx>Assessment</span><span class=p>:</span> <span class=o>&amp;</span><span class=nx>recaptchapb</span><span class=p>.</span><span class=nx>Assessment</span><span class=p>{</span>
</span></span><span class=line><span class=ln>37</span><span class=cl>            <span class=nx>Event</span><span class=p>:</span> <span class=o>&amp;</span><span class=nx>recaptchapb</span><span class=p>.</span><span class=nx>Event</span><span class=p>{</span>
</span></span><span class=line><span class=ln>38</span><span class=cl>                <span class=nx>Token</span><span class=p>:</span>   <span class=nx>req</span><span class=p>.</span><span class=nx>Token</span><span class=p>,</span>
</span></span><span class=line><span class=ln>39</span><span class=cl>                <span class=nx>SiteKey</span><span class=p>:</span> <span class=s>&#34;your_site_key&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=ln>40</span><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=ln>41</span><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=ln>42</span><span class=cl>    <span class=p>})</span>
</span></span><span class=line><span class=ln>43</span><span class=cl>    <span class=k>if</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>44</span><span class=cl>        <span class=nx>http</span><span class=p>.</span><span class=nf>Error</span><span class=p>(</span><span class=nx>w</span><span class=p>,</span> <span class=nx>err</span><span class=p>.</span><span class=nf>Error</span><span class=p>(),</span> <span class=nx>http</span><span class=p>.</span><span class=nx>StatusInternalServerError</span><span class=p>)</span>
</span></span><span class=line><span class=ln>45</span><span class=cl>        <span class=k>return</span>
</span></span><span class=line><span class=ln>46</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>47</span><span class=cl>
</span></span><span class=line><span class=ln>48</span><span class=cl>    <span class=nx>resp</span> <span class=o>:=</span> <span class=nx>VerifyResponse</span><span class=p>{</span>
</span></span><span class=line><span class=ln>49</span><span class=cl>        <span class=nx>Success</span><span class=p>:</span> <span class=nx>assessment</span><span class=p>.</span><span class=nx>TokenProperties</span><span class=p>.</span><span class=nx>Valid</span><span class=p>,</span>
</span></span><span class=line><span class=ln>50</span><span class=cl>        <span class=nx>Score</span><span class=p>:</span>   <span class=nx>assessment</span><span class=p>.</span><span class=nx>RiskAnalysis</span><span class=p>.</span><span class=nx>Score</span><span class=p>,</span>
</span></span><span class=line><span class=ln>51</span><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=ln>52</span><span class=cl>
</span></span><span class=line><span class=ln>53</span><span class=cl>    <span class=nx>w</span><span class=p>.</span><span class=nf>Header</span><span class=p>().</span><span class=nf>Set</span><span class=p>(</span><span class=s>&#34;Content-Type&#34;</span><span class=p>,</span> <span class=s>&#34;application/json&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=ln>54</span><span class=cl>    <span class=nx>json</span><span class=p>.</span><span class=nf>NewEncoder</span><span class=p>(</span><span class=nx>w</span><span class=p>).</span><span class=nf>Encode</span><span class=p>(</span><span class=nx>resp</span><span class=p>)</span>
</span></span><span class=line><span class=ln>55</span><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=ln>56</span><span class=cl>
</span></span><span class=line><span class=ln>57</span><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=ln>58</span><span class=cl>    <span class=nx>http</span><span class=p>.</span><span class=nf>HandleFunc</span><span class=p>(</span><span class=s>&#34;/verify-recaptcha&#34;</span><span class=p>,</span> <span class=nx>verifyRecaptchaHandler</span><span class=p>)</span>
</span></span><span class=line><span class=ln>59</span><span class=cl>    <span class=nx>log</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Server started on :8080&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=ln>60</span><span class=cl>    <span class=nx>http</span><span class=p>.</span><span class=nf>ListenAndServe</span><span class=p>(</span><span class=s>&#34;:8080&#34;</span><span class=p>,</span> <span class=kc>nil</span><span class=p>)</span>
</span></span><span class=line><span class=ln>61</span><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>需要準備：</p><ul><li><strong>Service Account JSON</strong> 憑證 (<code>service-account.json</code>)</li><li>環境變數 <code>GOOGLE_CLOUD_PROJECT</code> 設定為 GCP 專案 ID</li></ul><h3 id=驗證邏輯>驗證邏輯</h3><ul><li><p><code>Success = true</code> → token 有效</p></li><li><p><code>Score</code> 越高越可能是真人</p></li><li><p>建議策略：</p><ul><li>登入、金流相關操作：<code>score >= 0.5</code></li><li>一般留言或表單：可適度放寬</li><li><code>score &lt; 0.3</code> 時可要求額外驗證（例如簡訊或 Email 驗證）</li></ul></li></ul><h2 id=小結>小結</h2><p>完整流程如下：</p><ol><li>建立 reCAPTCHA Key</li><li>前端呼叫 <code>grecaptcha.enterprise.execute()</code> 拿到 token</li><li>後端透過 <code>CreateAssessment</code> 驗證 token</li><li>根據 <code>Valid</code> 與 <code>Score</code> 判斷是否放行</li></ol><p>這樣就完成了 reCAPTCHA Enterprise 的基本串接，可以有效防護網站免受機器人攻擊。</p><h2 id=參考連結>參考連結</h2><ul><li><a href=https://cloud.google.com/recaptcha-enterprise>Google reCAPTCHA Enterprise</a></li><li><a href=https://pkg.go.dev/cloud.google.com/go/recaptchaenterprise>Go Client Library for reCAPTCHA Enterprise</a></li></ul></div><footer class=post-footer><div class=post-nav><a href=https://e61983.github.io/posts/use-gomobile-to-build-ios-library/ class=post-nav-prev><span class=nav-label>上一篇</span>
<span class=nav-title>使用 Gomobile 建立 iOS 函式庫</span>
</a><a href=https://e61983.github.io/posts/oauth-introduction/ class=post-nav-next><span class=nav-label>下一篇</span>
<span class=nav-title>OAuth 與授權流程詳解</span></a></div></footer></article><aside class=post-sidebar><nav class="toc desktop-toc"><h3 class=toc-title>目錄</h3><nav id=TableOfContents><ul><li><a href=#前言>前言</a></li><li><a href=#主要內容>主要內容</a><ul><li><a href=#前置準備>前置準備</a></li><li><a href=#前端取得-token>前端：取得 Token</a></li><li><a href=#後端驗證-token-go-範例>後端：驗證 Token (Go 範例)</a></li><li><a href=#驗證邏輯>驗證邏輯</a></li></ul></li><li><a href=#小結>小結</a></li><li><a href=#參考連結>參考連結</a></li></ul></nav></nav></aside></div></div><button id=backToTop class=back-to-top aria-label=回到頂部>
<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"/></svg></button></main><footer class=footer><div class=container><div class=footer-content><div class=social-links><a href=https://github.com/e61983 target=_blank rel=noopener class=social-link><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.374.0.0 5.373.0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931.0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176.0.0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221.0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"/></svg>
GitHub</a></div><div class=copyright><p>&copy; 2025 Yuan. All rights reserved.</p><p>Powered by <a href=https://gohugo.io target=_blank rel=noopener>Hugo</a> & Yuan Theme</p></div></div></div></footer></div><script src=https://e61983.github.io/yuan/js/main.min.js></script></body></html>