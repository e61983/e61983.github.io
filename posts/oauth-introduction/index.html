<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>OAuth 與授權流程詳解 - Yuan のノート</title><meta name=description content="心之所至，隨意亂書"><meta name=keywords content="golang,embedded,linux,backend,programming"><meta name=author content="Yuan"><meta property="og:title" content="OAuth 與授權流程詳解 - Yuan のノート"><meta property="og:description" content="心之所至，隨意亂書"><meta property="og:type" content="article"><meta property="og:url" content="https://e61983.github.io/posts/oauth-introduction/"><link rel=icon type=image/svg+xml href=/favicon.svg><link rel=icon type=image/x-icon href=/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/favicon.svg><meta name=theme-color content="#0d1117"><link rel=stylesheet href=https://e61983.github.io/yuan/css/main.min.css><link rel=stylesheet href=https://e61983.github.io/yuan/css/chroma.min.css><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=Inter:wght@300;400;500;600;700&display=swap" rel=stylesheet></head><body class=theme-dark><div class=layout><header class=header><div class=container><div class=header-content><div class=header-brand><a href=https://e61983.github.io/ class=brand-link><span class=brand-text>Yuan のノート</span></a><p class=brand-subtitle>心之所至，隨意亂書</p></div><nav class=nav><ul class=nav-list><li class=nav-item><a href=/ class=nav-link>首頁</a></li><li class=nav-item><a href=/posts/ class=nav-link>文章</a></li><li class=nav-item><a href=/categories/ class=nav-link>分類</a></li><li class=nav-item><a href=/tags/ class=nav-link>標籤</a></li><li class=nav-item><a href=/archive/ class=nav-link>歸檔</a></li></ul></nav><button class=mobile-menu-toggle aria-label="Toggle menu">
<span class=hamburger></span>
<span class=hamburger></span>
<span class=hamburger></span></button></div></div></header><main class=main><div class=container><div class=post-layout><article class=post><header class=post-header><h1 class=post-title>OAuth 與授權流程詳解</h1><div class=post-meta><time class=post-date datetime=2025-08-22T20:30:22+08:00>2025年08月22日
</time><span class=reading-time>2 分鐘閱讀</span>
<span class=word-count>327 字</span>
<span class=post-author>by Yuan</span></div><div class=post-tags><a href=/tags/oauth class=tag>oauth</a>
<a href=/tags/authentication class=tag>authentication</a>
<a href=/tags/authorization class=tag>authorization</a>
<a href=/tags/security class=tag>security</a>
<a href=/tags/website class=tag>website</a>
<a href=/tags/api class=tag>api</a></div><div class=post-categories><a href=/categories/security class=category>security</a></div></header><div class=mobile-toc-toggle><button class=toc-toggle-btn aria-label=顯示/隱藏目錄>
<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M3 9h14V7H3v2zm0 4h14v-2H3v2zm0 4h14v-2H3v2zm16 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z"/></svg>
目錄</button><nav class=mobile-toc><h3 class=toc-title>目錄</h3><nav id=TableOfContents><ul><li><a href=#前言>前言</a></li><li><a href=#oauth-是什麼>OAuth 是什麼？</a></li><li><a href=#核心角色>核心角色</a></li><li><a href=#常見流程authorization-code-flow>常見流程：Authorization Code Flow</a></li><li><a href=#主要內容>主要內容</a><ul><li><a href=#oauth-flow-詳解>OAuth Flow 詳解</a></li><li><a href=#flow-選擇建議>Flow 選擇建議</a></li><li><a href=#access-token-與-refresh-token>Access Token 與 Refresh Token</a></li><li><a href=#oauth-與-openid-connect>OAuth 與 OpenID Connect</a></li></ul></li><li><a href=#小結>小結</a></li><li><a href=#參考連結>參考連結</a></li></ul></nav></nav></div><div class=post-content><h2 id=前言>前言</h2><p>在現代應用程式開發中，<strong>使用者身份驗證</strong>與<strong>資源授權</strong>已成為必備功能。
傳統帳號密碼模式存在風險，也不利於跨平台整合，因此 OAuth（Open Authorization）被提出，成為最常見的 <strong>授權框架（authorization framework）</strong>。</p><p>它的設計目標是：</p><ul><li>使用者不需交出帳號密碼</li><li>第三方應用能安全存取有限的資源</li><li>支援 Web、Mobile、Server、IoT 等不同場景</li></ul><hr><h2 id=oauth-是什麼>OAuth 是什麼？</h2><p>OAuth 並不是「驗證（Authentication）」協議，而是 <strong>授權（Authorization）協議</strong>。</p><p>它允許使用者：</p><ul><li>在不直接暴露帳號密碼的情況下</li><li>授權第三方應用程式</li><li>存取自己在某個服務（Resource Server）上的資料</li></ul><p>👉 簡單說：</p><blockquote><p>使用者告訴某平台：「我允許這個應用程式幫我拿資料，但我不會把密碼交給它。」</p></blockquote><hr><h2 id=核心角色>核心角色</h2><p>OAuth 中有四個角色：</p><ol><li><strong>Resource Owner</strong> — 使用者本人，擁有資源。</li><li><strong>Client</strong> — 想要存取資源的應用程式。</li><li><strong>Authorization Server</strong> — 負責驗證身份、頒發 Access Token。</li><li><strong>Resource Server</strong> — 保存資料，驗證 Token 後回應請求。</li></ol><hr><h2 id=常見流程authorization-code-flow>常見流程：Authorization Code Flow</h2><p>最典型的 OAuth 流程是 <strong>Authorization Code Flow</strong>：</p><ol><li>Client 導引用戶至 Authorization Server 登入並授權</li><li>驗證成功後回傳 <strong>Authorization Code</strong></li><li>Client 以 Code 換取 <strong>Access Token</strong></li><li>Client 使用 Token 存取 Resource Server</li></ol><div class=mermaid>sequenceDiagram
participant User
participant Browser
participant Server as Client (Backend)
participant Auth as Authorization Server
participant API as Resource Server
User->>Browser: 使用 Web App
Browser->>Auth: 導向登入/授權頁
Auth->>User: 請求登入
User->>Auth: 登入並授權
Auth->>Browser: 回傳 Authorization Code
Browser->>Server: 傳 Code 給後端
Server->>Auth: 用 Code 換取 Access Token
Auth->>Server: 回傳 Access Token
Server->>API: 存取資源
API->>Server: 回傳資料</div><script type=module>
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    mermaid.initialize({
        startOnLoad: true,
        theme: 'dark',
        themeVariables: {
            primaryColor: '#bb2528',
            primaryTextColor: '#fff',
            primaryBorderColor: '#7C0000',
            lineColor: '#F8B229',
            background: '#0d1117',
            mainBkg: '#161b22',
            secondBkg: '#21262d',
            tertiaryColor: '#21262d'
        }
    });
</script><hr><h2 id=主要內容>主要內容</h2><h3 id=oauth-flow-詳解>OAuth Flow 詳解</h3><p>OAuth 提供多種授權流程（Flow），用於不同情境。</p><h4 id=authorization-code-flow>Authorization Code Flow</h4><ul><li><strong>適用情境</strong>：Web 應用（有安全後端）。</li><li><strong>特點</strong>：使用 Authorization Code 換 Token，避免 Token 暴露在瀏覽器中。</li><li><strong>安全性</strong>：高。</li></ul><h4 id=authorization-code-flow-with-pkce>Authorization Code Flow with PKCE</h4><ul><li><strong>適用情境</strong>：行動裝置、SPA（無法安全儲存 Client Secret）。</li><li><strong>特點</strong>：使用 PKCE（Proof Key for Code Exchange）避免 Code 攔截攻擊。</li><li><strong>安全性</strong>：高，現今最常用。</li></ul><h4 id=implicit-flow>Implicit Flow</h4><ul><li><strong>適用情境</strong>：早期純前端應用（無後端）。</li><li><strong>特點</strong>：直接回傳 Access Token。</li><li><strong>安全性</strong>：低，容易洩漏 Token，已不建議使用。</li></ul><h4 id=client-credentials-flow>Client Credentials Flow</h4><ul><li><strong>適用情境</strong>：Server to Server 通訊（背景任務、API-to-API）。</li><li><strong>特點</strong>：使用 Client ID + Secret 換 Token，無使用者身份。</li><li><strong>安全性</strong>：高。</li></ul><h4 id=resource-owner-password-credentials-ropc>Resource Owner Password Credentials (ROPC)</h4><ul><li><strong>適用情境</strong>：老系統整合。</li><li><strong>特點</strong>：使用者直接把帳號密碼交給 Client。</li><li><strong>安全性</strong>：低，風險高，不建議使用。</li></ul><h4 id=device-authorization-flow>Device Authorization Flow</h4><ul><li><strong>適用情境</strong>：IoT、智慧電視、無瀏覽器的裝置。</li><li><strong>特點</strong>：顯示代碼，使用者用手機/電腦登入完成授權。</li><li><strong>安全性</strong>：中等，需輪詢授權伺服器。</li></ul><h3 id=flow-選擇建議>Flow 選擇建議</h3><table><thead><tr><th>Flow</th><th>適用情境</th><th>安全性</th></tr></thead><tbody><tr><td>Authorization Code</td><td>Web + 後端</td><td>高</td></tr><tr><td>Authorization Code + PKCE</td><td>SPA / Mobile</td><td>高</td></tr><tr><td>Implicit</td><td>純前端（舊）</td><td>低（不建議）</td></tr><tr><td>Client Credentials</td><td>Server to Server</td><td>高</td></tr><tr><td>ROPC</td><td>老系統整合</td><td>低（不建議）</td></tr><tr><td>Device Code</td><td>IoT / TV</td><td>中等</td></tr></tbody></table><h3 id=access-token-與-refresh-token>Access Token 與 Refresh Token</h3><ul><li><strong>Access Token</strong>：短期有效，用於 API 請求。</li><li><strong>Refresh Token</strong>：長期有效，可換新 Token，避免使用者頻繁登入。</li></ul><h3 id=oauth-與-openid-connect>OAuth 與 OpenID Connect</h3><ul><li><strong>OAuth</strong>：授權，處理「能不能存取資源」。</li><li><strong>OpenID Connect (OIDC)</strong>：基於 OAuth，解決「使用者是誰」。</li></ul><p>👉 如果你需要同時「登入驗證 + 授權存取」，就會採用 <strong>OIDC + OAuth</strong>。</p><h2 id=小結>小結</h2><p>OAuth 是現代應用程式中最重要的授權框架，
它的價值在於：</p><ul><li>使用者不用直接交出帳號密碼</li><li>第三方應用能安全存取限定資源</li><li>支援多種場景：Web、Mobile、Server、IoT</li></ul><p>在實務中：</p><ul><li><strong>Web / Mobile → Authorization Code Flow（+PKCE）</strong></li><li><strong>Server to Server → Client Credentials Flow</strong></li><li><strong>IoT / TV → Device Flow</strong></li><li><strong>避免使用 Implicit / ROPC</strong></li></ul><p>這些設計讓 OAuth 成為現代系統安全的核心。</p><h2 id=參考連結>參考連結</h2><ul><li><a href=https://tools.ietf.org/html/rfc6749>RFC 6749 - The OAuth 2.0 Authorization Framework</a></li><li><a href=https://tools.ietf.org/html/draft-ietf-oauth-security-topics>OAuth 2.0 Security Best Current Practice</a></li><li><a href=https://openid.net/specs/openid-connect-core-1_0.html>OpenID Connect Core 1.0</a></li><li><a href=https://tools.ietf.org/html/rfc7636>PKCE by OAuth Public Clients</a></li></ul></div><footer class=post-footer><div class=post-nav><a href=https://e61983.github.io/posts/use-google-recaptcha/ class=post-nav-prev><span class=nav-label>上一篇</span>
<span class=nav-title>使用 Go 串接 Google reCAPTCHA Enterprise</span>
</a><a href=https://e61983.github.io/posts/passkey-introduction/ class=post-nav-next><span class=nav-label>下一篇</span>
<span class=nav-title>用 Go 打造 Passkey（WebAuthn）最小可行產品：從原理到 MVP 實作</span></a></div></footer></article><aside class=post-sidebar><nav class="toc desktop-toc"><h3 class=toc-title>目錄</h3><nav id=TableOfContents><ul><li><a href=#前言>前言</a></li><li><a href=#oauth-是什麼>OAuth 是什麼？</a></li><li><a href=#核心角色>核心角色</a></li><li><a href=#常見流程authorization-code-flow>常見流程：Authorization Code Flow</a></li><li><a href=#主要內容>主要內容</a><ul><li><a href=#oauth-flow-詳解>OAuth Flow 詳解</a></li><li><a href=#flow-選擇建議>Flow 選擇建議</a></li><li><a href=#access-token-與-refresh-token>Access Token 與 Refresh Token</a></li><li><a href=#oauth-與-openid-connect>OAuth 與 OpenID Connect</a></li></ul></li><li><a href=#小結>小結</a></li><li><a href=#參考連結>參考連結</a></li></ul></nav></nav></aside></div></div><button id=backToTop class=back-to-top aria-label=回到頂部>
<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"/></svg></button></main><footer class=footer><div class=container><div class=footer-content><div class=social-links><a href=https://github.com/e61983 target=_blank rel=noopener class=social-link><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.374.0.0 5.373.0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931.0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176.0.0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221.0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"/></svg>
GitHub</a></div><div class=copyright><p>&copy; 2025 Yuan. All rights reserved.</p><p>Powered by <a href=https://gohugo.io target=_blank rel=noopener>Hugo</a> & Yuan Theme</p></div></div></div></footer></div><script src=https://e61983.github.io/yuan/js/main.min.js></script></body></html>